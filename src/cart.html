<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="../assets/images/icon.png">
	<title>3aroosa</title>
	<style>
		
		@font-face {
		    font-family: aroosa;
		    src: url(../assets/fonts/3aroosa_font.ttf);
		}

		body {
		    background-color: #F2E40A;
		}

		#main__product {
		    width: 100%;
		    text-align: center;
		    align-content: center;
		}

		#product {
		    background-color: #DD0A17;
		    filter: drop-shadow(3px 3px rgba(0, 0, 0, 1));
		    display: flex;
			margin-bottom: 10px;
		}

		#product__image {
			margin-bottom: -5px;
			padding: 0px;
		}
		img {
			margin: 0px;
			padding: 0px;
			align-content: left;

		}
		
		#text__data {
			display: inline-block;
			text-align: left;
			margin: 10px;
			height: 100%;
		}
		#buttons {
			background-color: green;
			width: 20%;
			height: 230px;
			align-content: right;
			justify-content: right;
			text-align: right;
			position: absolute;
			right: 0px;
			top: 0px;
			margin: 10px;
		}

		#product__details {
			height: 100%;
			color: black;
			border-style: none;
			outline: none;
		}

		#product__name {
			height: 100px;
			font-size: 3rem;
			color: black;
			font-weight: 700;
			text-align: left;
			align-content: center;
			display: inline-block;
			margin-left: 10px;
			margin-top: 10px;
			margin-bottom: 10px;
		}
		#product__price {
			height: 100px;
			font-size: 2rem;
			color: black;
			font-weight: 700;
			margin-left: 10px;
			margin-top: 10px;
			margin-bottom: 10px;
		}

		#deleteButton {
			width: 100%;
			height: 100%;
			font-size: 3rem;
			background-color: #F2E40A;
			color: black;
			border-style: none;
			border: 3px solid black;
			font-weight: 700;
			margin-bottom: 10px;
			outline: none;
		}

		#title, #pay {
			width: 100%;
			height: 250px;
			text-align: center;
			margin: auto;
			margin-bottom: 10px;
			background-color: #DD0A17;
			align-content: center;
			font-weight: 100px;
			font-size: 5rem;
			font-family: aroosa;
		    filter: drop-shadow(3px 3px rgba(0, 0, 0, 1));
		}

		#pay:hover {
			transition: background-color 100ms;
			background-color: #AA0A17;
			cursor: pointer;
		}
		#pay:active {
			transition: background-color 100ms;
			background-color: #880A17;
			cursor: pointer;
		}

	</style>
</head>
<body>

	<h1 id="title">العربة</h1>

	<div id="main__product">
<!-- 		<div id="product">
			<div id="product__image">
				<img src="../assets/images/products/1.png" width="200" height="250">
			</div>
			<div id="product__details">
				<div id="text__data">
					<span id="product__name">El Arosa</span>
					<br>
					<span id="product__price">0$</span>
				</div>
				<div id="buttons">
					<button id="deleteButton">x</button>
				</div>
			</div>
		</div> -->
	</div>

	<h1 id="pay" onclick=ship()>200$ ادفع</h1>

    <script>

    	var products = JSON.parse(localStorage.cart)
    	var total = 0

    	products.forEach((product, i) => {
    		total += Number(product.price)
			main__product.innerHTML += `<div id="product">
				<div id="product__image">
					<img src="${product.image}" width="200" height="250">
				</div>
				<div id="product__details">
					<div id="text__data">
						<span id="product__name">${product.title}</span>
						<br>
						<span id="product__price">${product.price}$</span>
					</div>
					<div id="buttons">
						<button id="deleteButton" onclick=deleteProduct(${i})>x</button>
					</div>
				</div>
			</div>`
    	})

    	pay.innerHTML = total + '$ ادفع'

    	function deleteProduct(index) {
    		total = 0
    		console.log(index)
    		main__product.innerHTML = ""
    		newProducts = products.filter((v, i) => i !== index)
    		console.log(newProducts)
    		newProducts.forEach((product, i) => {
	    		total += Number(product.price)
				main__product.innerHTML += `<div id="product">
					<div id="product__image">
						<img src="${product.image}" width="200" height="250">
					</div>
					<div id="product__details">
						<div id="text__data">
							<span id="product__name">${product.title}</span>
							<br>
							<span id="product__price">${product.price}$</span>
						</div>
						<div id="buttons">
							<button id="deleteButton" onclick=deleteProduct(${i})>x</button>
						</div>
					</div>
				</div>`
	    	})
    		pay.innerHTML = total + '$ ادفع'
	    	products = newProducts
    	}

    	function ship() {
    		localStorage.cart = ""
    		total = 0
    		window.open('ship.html', '_self')
    	}

    </script>

</body>
</html>
